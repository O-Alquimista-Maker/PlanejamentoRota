<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planejador de Coletas | by Fabio Sena</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Stylesheet -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css' ) }}">
</head>
<body>

    <div class="container-principal">
        <!-- PAINEL DA ESQUERDA -->
        <div id="left-panel">
            <div id="lista-clientes-container">
                <div class="painel-header-lateral">
                    <h3>Clientes</h3>
                    <a href="{{ gerenciar_clientes_url }}" title="Gerenciar Clientes" class="gerenciar-btn">&#9881;</a>
                </div>

                <!-- NOVO: Barra de Pesquisa -->
                <div class="search-container">
                    <input type="search" id="search-cliente" placeholder="Buscar cliente...">
                </div>
                
                <div id="lista-clientes">
                    {% for cliente in clientes %}
                        <div class="cliente-item" draggable="true" data-id="{{ cliente.id }}" data-nome="{{ cliente.nome_cliente }}">
                            <span class="status-icon pendente"></span>
                            <span>{{ cliente.nome_cliente }}</span>
                        </div>
                    {% endfor %}
                </div>
            </div>
            <button id="copiar-btn" class="action-button btn-primario">Copiar do M√™s Anterior</button>
            <button id="salvar-btn" class="action-button btn-sucesso">Salvar Planejamento</button>
        </div>

        <!-- PAINEL DA DIREITA (CALEND√ÅRIO) -->
        <div id="calendario-container" class="painel">
            <div class="painel-header">
                <a href="{{ url_for('calendario_view', ano=nav_anterior.ano, mes=nav_anterior.mes) }}" class="nav-button">&lt;</a>
                <h2>{{ nome_mes }} de {{ ano }}</h2>
                <a href="{{ url_for('exportar_excel', ano=ano, mes=mes) }}" class="export-btn" title="Exportar para Excel">&#x1F4E5;</a>
                <a href="{{ url_for('calendario_view', ano=nav_proximo.ano, mes=nav_proximo.mes) }}" class="nav-button">&gt;</a>
            </div>
            <table class="calendario">
                <thead><tr><th>Dom</th><th>Seg</th><th>Ter</th><th>Qua</th><th>Qui</th><th>Sex</th><th>S√°b</th></tr></thead>
                <tbody>
                    {% for semana in calendario %}
                    <tr>
                        {% for dia in semana %}
                            {% if dia == 0 %}
                                <td class="dia-invalido"></td>
                            {% else %}
                                <td class="dia-valido" data-dia="{{ dia }}">
                                    <div class="dia-content">
                                        <div class="dia-numero">{{ dia }}</div>
                                        <div class="equipe-container" data-equipe="R1"><h4>R01 <span class="contador-equipe">(0)</span></h4></div>
                                        <div class="equipe-container" data-equipe="R2"><h4>R02 <span class="contador-equipe">(0)</span></h4></div>
                                    </div>
                                </td>
                            {% endif %}
                        {% endfor %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div class="footer">
        Desenvolvido por üßô‚Äç‚ôÇÔ∏è <strong>Fabio Sena</strong> üßô‚Äç‚ôÇÔ∏è | Vers√£o 1.3
    </div>

    <script id="planejador-script"
            src="{{ url_for('static', filename='js/main.js') }}"
            data-ano="{{ ano }}"
            data-mes="{{ mes }}"
            data-planejamento-json='{{ planejamento_json | safe }}'
            defer>
    </script>

</body>
</html>
